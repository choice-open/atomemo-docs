---
title: 编辑节点
description: 学习如何在 {{PRODUCT_NAME}} 中配置和编辑工作流节点
---

# 编辑节点

节点编辑器是配置节点参数、设置和行为的主要界面。通过节点编辑器，你可以精确控制每个节点的功能和数据处理方式。

## 打开节点编辑器

### 方式一：双击节点

最常用的方式：

1. 在画布上找到要编辑的节点
2. 双击节点
3. 节点编辑器自动打开

### 方式二：选中节点

1. 单击选中节点
2. 节点编辑器在右侧或底部打开
3. 显示节点的配置选项

## 编辑器布局

节点编辑器由三个主要面板组成：

### 左侧面板：上下文

显示可用于当前节点的数据：

**主要功能**:
- 显示所有上游节点的输出数据
- 提供数据预览和浏览
- 支持拖拽数据到表达式字段
- 包含系统变量 `$sys`

**执行上游节点**:
- 如果没有数据，点击"执行前置节点"按钮
- 运行所有上游节点获取数据
- 查看实时执行结果

**使用场景**:
- 编写表达式时查看可用数据结构
- 测试节点输入数据
- 调试数据流问题

### 中间面板：配置

节点的主要配置区域，包含两个标签页：

#### 参数标签页

配置节点的核心功能参数。

**字段类型**:
- **文本输入**: 输入字符串或数字
- **下拉选择**: 从预定义选项中选择
- **开关**: 启用或禁用功能
- **代码编辑器**: 编写代码或表达式
- **文件上传**: 上传文件或选择资源

**字段模式**:
- **固定值模式**: 输入静态值
- **表达式模式**: 点击字段右侧图标切换到表达式模式
- **混合模式**: 某些字段支持字符串模板

**使用表达式**:

```javascript
// 引用上游节点数据
$('Chat Trigger').message

// 引用 HTTP 请求响应
$('HTTP Request').body.userId

// 使用字符串模板
`用户 ${$('Chat Trigger').userId} 的订单`

// 使用系统变量
$sys.app_id
```

**表达式展开编辑**:
- 点击表达式字段右侧的展开图标
- 在全屏编辑器中编写复杂表达式
- 享受完整的代码编辑体验
- 点击返回按钮保存并关闭

**分组字段**:
- 相关参数会组织在折叠面板中
- 点击面板标题展开或折叠
- 必填字段标有红色星号
- 鼠标悬停查看字段说明

#### 设置标签页

配置节点的通用设置。

**节点描述**:
- 添加节点功能说明
- 记录重要信息和注意事项
- 帮助团队成员理解节点用途

**其他设置**:
- 某些节点有特殊设置选项
- 根据节点类型显示不同配置

### 右侧面板：输出

显示节点的执行结果和输出数据。

**视图切换**:
- **Schema 视图**: 树形结构显示数据
- **JSON 视图**: 原始 JSON 格式

**Pin Data (固定数据)**:
- 点击"编辑输出"按钮固定测试数据
- 固定后节点不会实际执行
- 使用固定数据进行下游节点测试
- 点击"取消固定"恢复正常执行

**使用场景**:
- 验证节点输出是否符合预期
- 调试数据转换问题
- 为下游节点提供模拟数据

## 编辑器位置

节点编辑器支持两种显示位置：

### 底部位置

**特点**:
- 编辑器位于画布底部
- 三个面板水平排列
- 更宽的视野查看数据
- 适合数据密集型节点

**切换方法**:
1. 点击编辑器右上角的菜单按钮 (⋯)
2. 选择"位置" → "底部"
3. 编辑器移动到底部

### 右侧位置

**特点**:
- 编辑器位于画布右侧
- 仅显示配置面板（中间面板）
- 上下文和输出需要点击"上下文和输出"按钮在底部显示
- 保留更多画布空间
- 适合日常编辑工作

**切换方法**:
1. 点击编辑器右上角的菜单按钮 (⋯)
2. 选择"位置" → "侧边栏"
3. 编辑器移动到右侧

**查看上下文和输出**:
1. 点击配置面板中的"上下文和输出"按钮
2. 底部弹出面板显示上下文和输出数据
3. 再次点击按钮隐藏底部面板

**提示**: 系统会记住你的偏好位置，下次自动使用。

## 节点名称

### 编辑节点名称

节点名称显示在编辑器顶部：

1. 点击节点名称
2. 输入新名称
3. 按 Enter 保存
4. 或点击外部区域保存

**命名规则**:
- 名称必须唯一（同一工作流内）
- 支持中文、英文、数字
- 建议使用描述性名称
- Tool 节点名称会自动检查重复

**最佳实践**:
```
好的命名：
✓ "查询用户信息"
✓ "计算订单总额"
✓ "发送邮件通知"

不好的命名：
✗ "HTTP Request"
✗ "Code 1"
✗ "Node"
```

### 名称的重要性

节点名称用于：
- 表达式中引用节点数据: `$('节点名称').field`
- 画布上识别节点
- 日志和错误信息中显示

## 配置节点参数

### 必填参数

标有红色星号 (*) 的参数必须填写：

1. 找到所有必填参数
2. 填写有效值
3. 参数验证通过后可以保存

**常见验证规则**:
- 不能为空
- 格式正确（如 URL、邮箱）
- 数值范围有效
- 文件类型正确

### 可选参数

无星号标记的参数可以留空：

- 使用默认值
- 根据需要配置
- 优化节点行为

### 参数提示

每个参数都有说明文本：

1. 鼠标悬停在参数标签上
2. 查看详细说明
3. 了解参数作用和格式
4. 查看示例值

### 使用表达式

大多数参数支持表达式模式：

**切换到表达式模式**:
1. 找到参数输入框
2. 点击右侧的表达式图标
3. 输入或编辑表达式
4. 切换回固定值模式

**表达式编辑器功能**:
- 语法高亮
- 自动补全
- 实时错误检查
- 函数文档提示

**数据拖拽**:
1. 从左侧上下文面板选择数据
2. 拖拽到表达式字段
3. 自动生成表达式路径

### 默认值

某些参数有预设默认值：

- 显示在输入框中
- 可以直接使用
- 可以修改为其他值
- 清空后恢复默认值

## 测试节点

### 测试当前节点

在编辑过程中测试节点：

**对于 Tool 节点**:
1. 点击"测试工具"按钮
2. 填写必需的参数（如果有）
3. 查看测试结果
4. 验证功能是否正常

**对于 Action 节点**:
1. 确保上游节点已执行
2. 使用画布顶部的"测试"功能
3. 查看节点执行结果
4. 在右侧面板查看输出

### 查看执行结果

执行后查看节点输出：

1. 右侧面板显示输出数据
2. 切换 Schema 或 JSON 视图
3. 展开数据结构查看详情
4. 复制数据用于其他地方

### 使用固定数据

为节点设置测试数据：

1. 点击右侧面板的"编辑输出"
2. 输入或粘贴 JSON 数据
3. 点击"固定数据"按钮
4. 节点使用固定数据代替实际执行

**使用场景**:
- 测试下游节点而不执行上游
- 模拟 API 响应
- 调试特定数据场景
- 开发时节省时间

**取消固定**:
1. 点击"取消固定数据"按钮
2. 节点恢复正常执行
3. 固定数据被清除

## 特殊节点功能

### Tool 节点测试

Tool 节点有专门的测试功能：

**测试步骤**:
1. 配置 Tool 节点参数
2. 点击"测试工具"按钮
3. 如有必需参数，填写测试值
4. 查看测试执行结果
5. 调试和优化配置

**测试对话框**:
- 显示所有必需参数
- 提供输入框填写测试值
- 执行实际的工具调用
- 显示详细的执行日志

### 插件节点

来自插件的节点：

**识别插件节点**:
- 参数标签页显示"在 GitHub 查看"链接
- 点击链接访问插件仓库
- 查看插件文档和源代码

**插件节点配置**:
- 遵循插件定义的参数结构
- 查看插件文档了解详细用法
- 参数验证由插件定义

## 编辑器快捷操作

### 上下文和输出面板

在右侧位置模式下：

**显示/隐藏面板**:
1. 点击"上下文和输出"按钮
2. 底部弹出上下文和输出面板
3. 再次点击隐藏面板

**面板内容**:
- 左侧显示上下文数据
- 右侧显示输出数据
- 与编辑器中的面板内容同步

### 表达式展开编辑

对于复杂表达式：

1. 点击表达式字段的展开图标
2. 进入全屏表达式编辑器
3. 使用完整的编辑功能
4. 点击"返回"保存并关闭

**全屏编辑器优势**:
- 更大的编辑空间
- 完整的代码编辑器功能
- 专注编写复杂逻辑
- 同时查看上下文数据

### 关闭编辑器

**方法一：点击外部**
- 点击编辑器外的画布区域
- 编辑器自动关闭
- 更改自动保存

**方法二：按 Esc 键**
- 按 Esc 键关闭编辑器
- 快速退出编辑模式

**方法三：选择其他节点**
- 点击画布上的其他节点
- 自动切换到新节点的编辑器

## 常见问题

### Q: 参数修改后什么时候保存？

**A**: 参数修改后自动保存，无需手动保存操作。

### Q: 如何查看可用的表达式函数？

**A**:
- 在表达式编辑器中输入时，会显示自动补全提示
- 查看表达式文档了解所有可用方法
- 鼠标悬停在函数上查看说明

### Q: 为什么上下文面板没有数据？

**A**: 可能的原因：
- 上游节点还未执行
- 上游节点执行失败
- 没有连接上游节点

解决方法：点击"执行前置节点"按钮运行上游节点。

### Q: 固定数据和执行数据有什么区别？

**A**:
- **执行数据**: 节点实际运行产生的输出
- **固定数据**: 手动设置的测试数据，节点不会实际执行

固定数据优先于执行数据，用于测试场景。

### Q: 如何复制节点配置到另一个节点？

**A**:
1. 在画布上复制节点 (Cmd/Ctrl + C)
2. 粘贴节点 (Cmd/Ctrl + V)
3. 新节点继承所有配置
4. 修改节点名称和特定参数

### Q: 编辑器位置设置会保存吗？

**A**: 是的，系统会记住你选择的编辑器位置，下次打开自动使用相同位置。

### Q: Tool 节点测试失败怎么办？

**A**: 检查以下项目：
1. 所有必需参数是否已填写
2. 参数值格式是否正确
3. 工具配置是否有效
4. 查看错误信息进行调试

### Q: 表达式语法错误如何发现？

**A**:
- 表达式编辑器会显示红色波浪线
- 鼠标悬停查看错误详情
- 检查语法和引用是否正确
- 确保引用的节点名称存在

## 最佳实践

### 1. 渐进式配置

**从简单开始**:
1. 先配置必填参数
2. 测试基本功能
3. 逐步添加可选参数
4. 优化和调整配置

### 2. 充分利用上下文面板

**提高效率**:
- 编写表达式前查看数据结构
- 拖拽数据到字段自动生成表达式
- 执行上游节点获取真实数据
- 避免盲目编写表达式

### 3. 使用固定数据加速开发

**测试技巧**:
- 为关键节点固定测试数据
- 避免重复执行耗时的上游节点
- 快速迭代和调试下游节点
- 完成后记得取消固定

### 4. 添加节点描述

**文档化工作流**:
- 为复杂节点添加描述
- 记录重要的配置决策
- 说明数据处理逻辑
- 帮助团队成员理解

### 5. 合理命名节点

**清晰的命名**:
```
场景导向：
✓ "查询用户积分"
✓ "验证订单状态"
✓ "生成 PDF 报告"

功能导向：
✓ "用户数据转换"
✓ "错误通知"
✓ "数据格式化"
```

### 6. 验证表达式

**避免错误**:
- 编写表达式后测试执行
- 检查数据类型是否匹配
- 处理可能的空值情况
- 使用可选链运算符 `?.`

### 7. 使用合适的编辑器位置

**根据场景选择**:
- 数据密集节点 → 底部位置（更宽视野）
- 简单配置节点 → 右侧位置（节省空间）
- 需要同时查看画布 → 右侧位置

## 相关资源

- [使用节点](/zh-hans/guide/working-with-nodes) - 了解节点基础操作
- [表达式](/zh-hans/guide/expressions) - 学习表达式语法和函数
- [Chat 触发器](/zh-hans/guide/workflow/nodes/trigger-nodes/chat) - 查看节点文档
